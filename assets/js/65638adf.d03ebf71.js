"use strict";(self.webpackChunkflamework=self.webpackChunkflamework||[]).push([[7845],{8593:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=t(5893),i=t(1151);const o={title:"September 14th Release",authors:"fireboltofdeath"},s=void 0,l={permalink:"/blog/2021/09/14/flamework-release",editUrl:"https://github.com/rbxts-flamework/documentation/tree/master/blog/2021-09-14-flamework-release.md",source:"@site/blog/2021-09-14-flamework-release.md",title:"September 14th Release",description:"Change Log",date:"2021-09-14T00:00:00.000Z",formattedDate:"September 14, 2021",tags:[],readingTime:2.995,hasTruncateMarker:!0,authors:[{name:"fireboltofdeath",title:"Maintainer",url:"https://github.com/Fireboltofdeath",imageURL:"https://avatars.githubusercontent.com/u/24422634?v=4",key:"fireboltofdeath"}],frontMatter:{title:"September 14th Release",authors:"fireboltofdeath"},unlisted:!1,prevItem:{title:"November 3rd Release",permalink:"/blog/2021/11/03/flamework-release"}},a={authorsImageUrls:[void 0]},c=[{value:"Change Log",id:"change-log",level:2},{value:"Transformer",id:"transformer",level:3},{value:"Core",id:"core",level:3},{value:"Networking",id:"networking",level:3},{value:"Components",id:"components",level:3},{value:"Changes",id:"changes",level:2},{value:"Revised Networking Structure",id:"revised-networking-structure",level:3},{value:"Converting to the new structure",id:"converting-to-the-new-structure",level:4},{value:"Global Networking Events",id:"global-networking-events",level:3},{value:"Remote Functions",id:"remote-functions",level:3},{value:"Defining a new RemoteFunction",id:"defining-a-new-remotefunction",level:4},{value:"Using a networking function",id:"using-a-networking-function",level:4},{value:"Previous Release",id:"previous-release",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"change-log",children:"Change Log"}),"\n",(0,r.jsx)(n.h3,{id:"transformer",children:"Transformer"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Consistent ID generation for non-obfuscated packages."}),"\n",(0,r.jsxs)(n.li,{children:["SourceFiles are validated prior to Flamework transforming them.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"This can lead to slightly slower compile times, but decreases chance of incorrect emit and diagnostics."}),"\n",(0,r.jsxs)(n.li,{children:["You can disable this via the transformer's ",(0,r.jsx)(n.code,{children:"noSemanticDiagnostics"})," option, but this is not recommended."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"core",children:"Core"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Flamework.addPaths now has glob support.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'Flamework.addPaths("src/features/*/server")'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"networking",children:"Networking"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You can now pass player arrays to event.fire()"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#remote-functions",children:"Promise-based remote functions are now supported."})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#global-networking-events",children:"Global networking events."})}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)("span",{style:{color:"crimson"},children:"[BREAKING]"}),"\n",(0,r.jsx)("a",{href:"#revised-networking-structure",children:"Revised structure for networking."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Added ",(0,r.jsx)(n.code,{children:"Components.getAllComponents<T>()"})," for fetching all components of a certain type."]}),"\n",(0,r.jsxs)(n.li,{children:["Components will move all constructor logic (fields, constructor body, etc) into onStart automatically.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you're not using the ",(0,r.jsx)(n.code,{children:"OnStart"})," event, you cannot have a method named ",(0,r.jsx)(n.code,{children:"onStart"})," in a component."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"changes",children:"Changes"}),"\n",(0,r.jsx)(n.h3,{id:"revised-networking-structure",children:"Revised Networking Structure"}),"\n",(0,r.jsxs)(n.p,{children:["Flamework's event objects are now solely comprised of the developer-specified events, so methods like ",(0,r.jsx)(n.code,{children:"connect"})," and ",(0,r.jsx)(n.code,{children:"predict"})," are no longer under the main ",(0,r.jsx)(n.code,{children:"Events"})," object, but is now under each event separately."]}),"\n",(0,r.jsxs)(n.p,{children:["Now that events are connected to via the same way they are fired, this means events that have the same name on server and client will both have receiver methods (",(0,r.jsx)(n.code,{children:"connect"}),", ",(0,r.jsx)(n.code,{children:"predict"}),") as well as sender methods (",(0,r.jsx)(n.code,{children:"fire"}),", ",(0,r.jsx)(n.code,{children:"except"}),", ",(0,r.jsx)(n.code,{children:"broadcast"}),") where applicable."]}),"\n",(0,r.jsx)(n.p,{children:"Networking functions also follow this structure, but are new and therefore do not have any breaking changes."}),"\n",(0,r.jsx)(n.p,{children:"This was done to prevent accidental breaking changes in the future, as well as for stylistics reasons."}),"\n",(0,r.jsx)(n.h4,{id:"converting-to-the-new-structure",children:"Converting to the new structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// old\nEvents.connect("myEvent", () => {});\nEvents.predict("myEvent");\n\n// new\nEvents.myEvent.connect(() => {});\nEvents.myEvent.predict();\n'})}),"\n",(0,r.jsx)(n.h3,{id:"global-networking-events",children:"Global Networking Events"}),"\n",(0,r.jsx)(n.p,{children:"Currently, Flamework allows you to register handlers for two different events.\nIt is not recommended to directly punish players over these events, as there are many ways an invalid value could be provided."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["onBadRequest","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fires whenever a client (or the server) sends incorrect arguments to an event/function."}),"\n",(0,r.jsx)(n.li,{children:"First parameter is the player (or LocalPlayer on the client.)"}),"\n",(0,r.jsx)(n.li,{children:"Second parameter is the NetworkInfo object, containing information about the specific event/function."}),"\n",(0,r.jsx)(n.li,{children:"Third parameter is the argument number which failed the type guards."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["onBadResponse","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fires whenever a client (or the server) returns an incorrect value from a networking function."}),"\n",(0,r.jsx)(n.li,{children:"First parameter is the player (or LocalPlayer on the client.)"}),"\n",(0,r.jsx)(n.li,{children:"Second parameter is the NetworkInfo object, containing information about the specific event/function."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'Networking.registerNetworkHandler("onBadRequest", (player, event, failedArg) => {\n\tprint(player, "fired", event.name, "but passed invalid value for argument", failedArg);\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"remote-functions",children:"Remote Functions"}),"\n",(0,r.jsx)(n.p,{children:"Flamework now supports an equivalent of RemoteFunctions, using promises.\nYou can fire and receive on both client and server, but only one callback can be registered at one time."}),"\n",(0,r.jsx)(n.h4,{id:"defining-a-new-remotefunction",children:"Defining a new RemoteFunction"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface ServerFunctions {\n\tmyServerFunction(param1: string, param2: number): Instance | undefined;\n}\n\ninterface ClientFunctions {\n\tmyClientFunction(param1: string, param2: number): Instance | undefined;\n}\n\nexport const GlobalFunctions = Networking.createFunction<ServerFunctions, ClientFunctions>({\n\t// server middleware\n}, {\n\t// client middleware\n})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"using-a-networking-function",children:"Using a networking function"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// server\nFunctions.prompt.invoke(player, "Yes", "No").then((result) => print("player said", result));\nFunctions.fetchData.setCallback((player, kind) => {\n\treturn kind === "Coins" ? getPlayerCoins(player) : getPlayerGems(player);\n})\n\n// client\nFunctions.fetchData.invoke("Coins").then((result) => print("I have", result, "coins!"));\nFunctions.prompt.setCallback((option1, option2) => {\n\treturn math.random() < 0.5 ? option1 : option2;\n})\n\n// prediction (fire a client function on the client)\nFunctions.prompt.predict("Yes", "No").then((result) => print("I chose", result));\n'})}),"\n",(0,r.jsx)(n.h2,{id:"previous-release",children:"Previous Release"}),"\n",(0,r.jsx)(n.p,{children:"If you run into any issues with the update, you should revert your packages to these specific versions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"@flamework/core: 1.0.0-beta.0\n@flamework/networking: 1.0.0-beta.2\n@flamework/components: 1.0.0-beta.3\nrbxts-transformer-flamework: 1.0.0-beta.3\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>s});var r=t(7294);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);