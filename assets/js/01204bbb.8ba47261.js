"use strict";(self.webpackChunkflamework=self.webpackChunkflamework||[]).push([[4195],{4885:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>a});var i=n(5893),s=n(1151);const l={title:"Lifecycle Events"},o=void 0,r={id:"modding/guides/lifecycle-events",title:"Lifecycle Events",description:"This guide is for creating a custom lifecycle event.",source:"@site/docs/modding/guides/lifecycle-events.md",sourceDirName:"modding/guides",slug:"/modding/guides/lifecycle-events",permalink:"/docs/modding/guides/lifecycle-events",draft:!1,unlisted:!1,editUrl:"https://github.com/rbxts-flamework/documentation/docs/modding/guides/lifecycle-events.md",tags:[],version:"current",frontMatter:{title:"Lifecycle Events"},sidebar:"flamework",previous:{title:"Listeners",permalink:"/docs/modding/guides/listeners"},next:{title:"Decorators",permalink:"/docs/modding/guides/decorators"}},c={},a=[{value:"Defining the lifecycle event",id:"defining-the-lifecycle-event",level:2},{value:"Implementing the lifecycle event",id:"implementing-the-lifecycle-event",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"This guide is for creating a custom lifecycle event."}),"\n",(0,i.jsx)(t.h2,{id:"defining-the-lifecycle-event",children:"Defining the lifecycle event"}),"\n",(0,i.jsx)(t.p,{children:"You are able to define any number of lifecycle events and they can even be identical to one another. Flamework uses symbol information and assigns a unique ID to every lifecycle event. This means you can have multiple lifecycle events with identical members, even names, and Flamework can distinguish between them."}),"\n",(0,i.jsxs)(t.p,{children:["You are also able to define metadata which will be generated when a class uses your lifecycle event as shown in ",(0,i.jsx)(t.a,{href:"../metadata#how-do-i-request-metadata",children:"the metadata docs"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"export interface OnPlayerJoined {\n\tonPlayerJoined(player: Player): void;\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"implementing-the-lifecycle-event",children:"Implementing the lifecycle event"}),"\n",(0,i.jsx)(t.p,{children:"After defining the lifecycle event and any metadata you want it to use, you can use the listeners API to implement it. It's recommended that you implement lifecycle events in a service/controller so that they only occur after ignition."}),"\n",(0,i.jsxs)(t.p,{children:["It is worth noting that methods in TypeScript use ",(0,i.jsx)(t.a,{href:"https://roblox-ts.com/playground/#code/JYOwLgpgTgZghgYwgAgOoHsDuyDeAoASAFsIwALdAEwAoAHOKOIgRgC5kBnMKUAcwEp2AN3TBKAbjwBfPHgQAbOBw7IAggCMEyYEVryIJcCozZ8xUhRr1GLdgCI4mu-1yECSjtDB0GTZsgBeIOQHJ35xZAB6SOQAUQAleIB5eIBCQhkZOXQQLmRHLQDkEAhsDQRqcOzcsGRMLHYTQPzNSTx6zAA6EnIqajsQdFqC53EgA",children:"bivariant parameters"})," which means implementations of lifecycle events are not always correctly typed."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"@Service()\nclass PlayerJoinService implements OnStart {\n\tonStart() {\n\t\tconst listeners = new Set<OnPlayerJoined>();\n\n\t\t// Automatically updates the listeners set whenever a listener is added or removed.\n\t\t// You can do more than just keeping track of a set,\n\t\t// e.g fire the new listener's event for all existing players.\n\t\tModding.onListenerAdded<OnPlayerJoined>((object) => listeners.add(object));\n\t\tModding.onListenerRemoved<OnPlayerJoined>((object) => listeners.delete(object));\n\n\t\tPlayers.PlayerAdded.Connect((player) => {\n\t\t\tfor (const listener of listeners) {\n\t\t\t\ttask.spawn(() => listener.onPlayerJoined(player));\n\t\t\t}\n\t\t})\n\n\t\tfor (const player of Players.GetPlayers()) {\n\t\t\tfor (const listener of listeners) {\n\t\t\t\ttask.spawn(() => listener.onPlayerJoined(player));\n\t\t\t}\n\t\t}\n\t}\n}\n"})})]})}function m(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>o});var i=n(7294);const s={},l=i.createContext(s);function o(e){const t=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);